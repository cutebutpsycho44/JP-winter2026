<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Japan Trip 2026 üéå</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=Mali:wght@200;300;400;500;600;700&family=Outfit:wght@300;400;500;700;800&display=swap" rel="stylesheet">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Mali', 'cursive'],      // ‡∏ü‡∏≠‡∏ô‡∏ï‡πå‡∏´‡∏•‡∏±‡∏Å (Timeline)
                        display: ['Outfit', 'sans-serif'], // ‡∏ü‡∏≠‡∏ô‡∏ï‡πå‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å (Header + Cards)
                    },
                    colors: {
                        'main-bg': '#F8F9FA',
                        'accent-blue': '#2C3E50',  
                        'accent-brown': '#5D4037',
                    }
                }
            }
        }
    </script>
    <style>
        /* Animation: Shimmer Effect ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠ Japan 2026 */
        @keyframes shimmer {
            0% { background-position: -200% center; }
            100% { background-position: 200% center; }
        }
        
        .shimmer-text {
            font-family: 'Outfit', sans-serif !important;
            background: linear-gradient(
                90deg, 
                #2C3E50 0%, 
                #2C3E50 40%, 
                #A0AEC0 50%, 
                #2C3E50 60%, 
                #2C3E50 100%
            );
            background-size: 200% auto;
            color: #2C3E50;
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: shimmer 3s linear infinite;
        }

        /* Timeline Line */
        .timeline-line::before {
            content: '';
            position: absolute;
            top: 0;
            bottom: 0;
            left: 28px;
            width: 2px;
            background: #E2E8F0;
            z-index: 0;
        }

        /* Glass Button */
        .btn-silver {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(8px);
            border: 1px solid rgba(200, 200, 200, 0.5);
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
            font-family: 'Outfit', sans-serif !important; /* ‡∏õ‡∏∏‡πà‡∏° Back ‡πÉ‡∏ä‡πâ Outfit ‡πÉ‡∏´‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ò‡∏µ‡∏° */
        }
    </style>
</head>
<body class="bg-main-bg text-gray-700 min-h-screen">

    <div id="landing-view" class="max-w-md mx-auto p-6 fade-in min-h-screen flex flex-col justify-center">
        
        <header class="text-center mb-12">
            <h1 class="shimmer-text text-7xl font-extrabold tracking-tighter uppercase leading-none mb-2">
                Japan<br><span class="text-5xl font-bold">2026</span>
            </h1>
            <p class="text-gray-400 text-xs font-bold tracking-[0.3em] mt-4 uppercase font-display">Travel Itinerary</p>
        </header>

        <div id="loading" class="text-center py-10">
            <div class="animate-pulse text-2xl text-gray-400 font-display">Loading... ‚ùÑÔ∏è</div>
        </div>

        <div id="days-grid" class="grid grid-cols-1 gap-5"></div>
    </div>

    <div id="detail-view" class="max-w-md mx-auto p-4 hidden relative min-h-screen pb-20">
        
        <div class="sticky top-4 z-50 mb-8 flex justify-between items-center">
            <button onclick="showLanding()" class="btn-silver text-accent-blue px-5 py-2 rounded-full font-bold text-sm flex items-center gap-2 hover:bg-white transition-transform active:scale-95 uppercase tracking-wide">
                ‚óÄ Back
            </button>
            <div id="detail-title" class="font-display font-bold text-lg text-accent-blue bg-white/80 px-4 py-2 rounded-xl backdrop-blur-md shadow-sm border border-gray-100">
                </div>
        </div>

        <div id="timeline-content" class="space-y-8 relative timeline-line pl-2 pr-1 font-sans"></div>

        <div class="mt-12 text-center">
            <button onclick="showLanding()" class="btn-silver text-accent-blue px-8 py-3 rounded-full font-bold text-base hover:bg-white transition-transform active:scale-95 w-full shadow-md uppercase tracking-wide">
                Back to Main
            </button>
        </div>
    </div>

    <script>
        const SHEET_CSV_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vSsNmpYBJTnOp4Wa3lQy3VeTolxfSHKzRaXXGnM2k_C8iq0hYC4MlLLqSIb12Ml8fDDw6AhPp6ePFds/pub?gid=289892197&single=true&output=csv";

        let allData = [];

        document.addEventListener('DOMContentLoaded', () => {
            fetchData();
        });

        function fetchData() {
            Papa.parse(SHEET_CSV_URL, {
                download: true,
                header: true,
                skipEmptyLines: true,
                complete: function(results) {
                    allData = results.data;
                    renderDaysGrid(allData);
                },
                error: function(err) {
                    document.getElementById('loading').innerHTML = "‚ùå Error Loading Data";
                }
            });
        }

        // --- Helper: ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Emoji ---
        function getDayEmoji(dayText) {
            const d = dayText.toLowerCase().replace(/\s/g, ''); 
            
            if (d.includes('day1')) return '‚úàÔ∏è'; 
            if (d.includes('day2')) return 'üóª'; 
            if (d.includes('day3') || d.includes('day4') || d.includes('day5')) return 'üèÇ'; 
            if (d.includes('day6')) return 'üêª'; 
            if (d.includes('day7')) return 'üåã'; 
            if (d.includes('day8')) return '‚úàÔ∏è'; 
            
            return 'üáØüáµ'; 
        }

        // --- View 1: Landing Page (‡πÉ‡∏ä‡πâ Font Outfit ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î) ---
        function renderDaysGrid(data) {
            const grid = document.getElementById('days-grid');
            document.getElementById('loading').classList.add('hidden');

            const daysMap = new Map();
            data.forEach(row => {
                if(!row.Day) return;
                if(!daysMap.has(row.Day)) {
                    daysMap.set(row.Day, { date: row.Date || '', dayTitle: row.Day });
                }
            });

            daysMap.forEach((val, key) => {
                const emoji = getDayEmoji(val.dayTitle);
                const card = document.createElement('div');
                // ‡πÄ‡∏û‡∏¥‡πà‡∏° font-display (Outfit) ‡πÉ‡∏´‡πâ Card
                card.className = "font-display bg-white p-6 rounded-3xl shadow-sm border-2 border-transparent hover:border-blue-100 cursor-pointer transition-all active:scale-95 flex items-center justify-between group";
                card.onclick = () => showTimeline(key);

                // ‡∏õ‡∏£‡∏±‡∏ö Typography: Date (‡∏ö‡∏ô) + Day (‡∏•‡πà‡∏≤‡∏á) ‡πÅ‡∏ö‡∏ö Modern
                card.innerHTML = `
                    <div class="text-left">
                        <p class="text-gray-400 text-xs font-bold tracking-[0.2em] uppercase mb-2">${val.date}</p> 
                        <h2 class="text-4xl font-extrabold text-accent-blue group-hover:text-blue-600 transition-colors tracking-tight">${val.dayTitle}</h2>
                    </div>
                    <div class="text-5xl opacity-80 group-hover:scale-110 transition-transform filter drop-shadow-sm">
                        ${emoji}
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        // --- View 2: Timeline (‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏Ç‡πâ‡∏≤‡∏á‡πÉ‡∏ô) ---
        function showTimeline(selectedDay) {
            document.getElementById('landing-view').classList.add('hidden');
            document.getElementById('detail-view').classList.remove('hidden');
            window.scrollTo(0, 0);

            const container = document.getElementById('timeline-content');
            container.innerHTML = '';

            const dayData = allData.filter(row => row.Day === selectedDay);
            
            if(dayData.length > 0) {
                document.getElementById('detail-title').innerText = `${selectedDay}`;
            }

            dayData.forEach(row => {
                if (!row.Activity && !row.Time) return;

                const item = document.createElement('div');
                item.className = "relative flex items-start gap-4 z-10";

                const catStyle = getCategoryStyle(row.Category);
                const categoryIcon = getCategoryIcon(row.Category);

                item.innerHTML = `
                    <div class="flex-shrink-0 w-14 h-14 rounded-2xl flex items-center justify-center border-2 shadow-sm text-2xl bg-white z-10 ${catStyle.border} ${catStyle.bg}">
                        ${categoryIcon}
                    </div>

                    <div class="flex-1 bg-white p-5 rounded-2xl border border-gray-100 shadow-sm">
                        
                        <div class="text-2xl sm:text-3xl font-bold text-accent-blue mb-2 tracking-tight font-sans">
                            ${row.Time || ''}
                        </div>

                        ${row.Location ? `
                        <div class="mb-3">
                             <a href="https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(row.Location)}" target="_blank" class="font-sans text-lg sm:text-xl font-bold text-gray-800 hover:text-blue-600 underline decoration-2 decoration-blue-200 underline-offset-4 transition-colors break-words text-balance leading-snug block">
                                üìç ${row.Location}
                             </a>
                        </div>
                        ` : ''}

                        <div class="font-sans text-gray-500 text-base font-medium leading-relaxed break-words text-balance mb-4">
                            ${row.Activity || '-'}
                        </div>

                        ${(row.Departure || row.Arrival) ? `
                            <div class="font-sans flex flex-wrap gap-x-4 gap-y-2 mt-3 pt-3 border-t border-gray-100 text-sm text-gray-600 bg-gray-50/50 p-2 rounded-lg">
                                ${row.Departure ? `<div>üõ´ Dep: <span class="font-bold text-accent-blue">${row.Departure}</span></div>` : ''}
                                ${row.Arrival ? `<div>üõ¨ Arr: <span class="font-bold text-accent-blue">${row.Arrival}</span></div>` : ''}
                            </div>
                        ` : ''}

                        ${row['Map Code'] ? `
                            <div class="mt-3 text-sm text-gray-400 font-normal border-t border-dashed border-gray-200 pt-2 font-sans">
                                Map Code: <span class="${catStyle.text} font-medium tracking-wider ml-1">${row['Map Code']}</span>
                            </div>
                        ` : ''}
                        
                        ${row.Category ? `
                            <div class="mt-4 flex justify-end">
                                <span class="font-sans text-xs font-bold px-3 py-1 rounded-lg uppercase tracking-wider border ${catStyle.bg} ${catStyle.border} ${catStyle.text}">
                                    ${row.Category.toUpperCase()}
                                </span>
                            </div>
                        ` : ''}

                    </div>
                `;
                container.appendChild(item);
            });
        }

        function showLanding() {
            document.getElementById('detail-view').classList.add('hidden');
            document.getElementById('landing-view').classList.remove('hidden');
        }

        // Helpers
        function getCategoryStyle(cat) {
            if (!cat) return { bg: 'bg-gray-100', border: 'border-gray-200', text: 'text-gray-500' };
            const c = cat.toUpperCase().trim();
            
            // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏°‡πÄ‡∏â‡∏î 200
            if (c === 'FOOD') return { bg: 'bg-purple-200', border: 'border-purple-300', text: 'text-purple-800' };
            if (c === 'TRAVEL') return { bg: 'bg-pink-200', border: 'border-yellow-500', text: 'text-pink-800' };
            if (c === 'SHOPPING') return { bg: 'bg-red-200', border: 'border-red-300', text: 'text-red-900' };
            if (c === 'SNOW') return { bg: 'bg-sky-200', border: 'border-blue-800', text: 'text-blue-900' };
            if (c === 'HOTEL') return { bg: 'bg-yellow-200', border: 'border-yellow-500', text: 'text-yellow-900' };
            if (c.includes('COFFEE') || c.includes('MATCHA')) return { bg: 'bg-green-200', border: 'border-amber-800', text: 'text-green-900' };

            return { bg: 'bg-gray-100', border: 'border-gray-300', text: 'text-gray-600' };
        }

        function getCategoryIcon(cat) {
            if (!cat) return '‚ú®';
            const c = cat.toUpperCase();
            if (c === 'FOOD') return 'üçú';
            if (c === 'TRAVEL') return 'üöÑ';
            if (c === 'SHOPPING') return 'üõçÔ∏è';
            if (c === 'SNOW') return 'üèÇ'; 
            if (c === 'HOTEL') return 'üè®';
            if (c.includes('COFFEE') || c.includes('MATCHA')) return 'üçµ';
            return 'üìå';
        }
    </script>
</body>
</html>
