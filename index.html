<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Japan Trip 2026 üéå</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=Mali:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Mali', 'cursive'],
                    },
                    colors: {
                        // ‡∏ò‡∏µ‡∏°‡∏´‡∏•‡∏±‡∏Å (‡∏Ç‡∏≤‡∏ß ‡πÄ‡∏ó‡∏≤ ‡∏ü‡πâ‡∏≤ ‡∏ï‡∏±‡∏î‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô/‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏•)
                        'main-bg': '#F8F9FA',      // ‡∏Ç‡∏≤‡∏ß‡πÄ‡∏ó‡∏≤‡πÜ ‡∏™‡∏ö‡∏≤‡∏¢‡∏ï‡∏≤
                        'main-card': '#FFFFFF',    // ‡∏Ç‡∏≤‡∏ß‡∏à‡∏±‡πä‡∏ß‡∏∞
                        'text-primary': '#2C3E50', // ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏Ç‡πâ‡∏°‡πÄ‡∏Å‡∏∑‡∏≠‡∏ö‡∏î‡∏≥ (‡∏ï‡∏±‡∏ß‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡∏´‡∏•‡∏±‡∏Å)
                        'text-secondary': '#7F8C8D', // ‡πÄ‡∏ó‡∏≤ (‡∏ï‡∏±‡∏ß‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡∏£‡∏≠‡∏á)
                        'accent-blue': '#34495E',  // ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏Ç‡πâ‡∏° (‡∏Ç‡∏≠‡∏ö)
                        'accent-brown': '#5D4037', // ‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏•‡πÄ‡∏Ç‡πâ‡∏° (‡∏Ç‡∏≠‡∏ö)
                        'silver-glass': 'rgba(255, 255, 255, 0.7)', // ‡∏™‡∏µ‡∏õ‡∏∏‡πà‡∏° Silver Transparent
                    }
                }
            }
        }
    </script>
    <style>
        /* CSS ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Scrollbar ‡πÅ‡∏•‡∏∞ Transition */
        body { -webkit-tap-highlight-color: transparent; }
        
        /* Timeline Line */
        .timeline-line::before {
            content: '';
            position: absolute;
            top: 0;
            bottom: 0;
            left: 24px; /* ‡∏õ‡∏£‡∏±‡∏ö‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÄ‡∏™‡πâ‡∏ô‡∏ï‡∏±‡πâ‡∏á */
            width: 2px;
            background: #E2E8F0;
            z-index: 0;
        }

        /* Glassmorphism Button */
        .btn-silver {
            background: rgba(255, 255, 255, 0.6);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.8);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
        }
    </style>
</head>
<body class="bg-main-bg text-text-primary min-h-screen pb-10">

    <div id="landing-view" class="max-w-md mx-auto p-6 fade-in">
        <header class="text-center mb-8 pt-4">
            <h1 class="text-4xl font-bold text-accent-blue tracking-wider">JAPAN <span class="text-xl font-light">2026</span></h1>
            <p class="text-gray-400 text-sm mt-1">Select a day to view timeline</p>
        </header>

        <div id="loading" class="text-center py-10">
            <div class="animate-pulse text-2xl text-gray-400">Loading Itinerary... ‚ùÑÔ∏è</div>
        </div>

        <div id="days-grid" class="grid grid-cols-1 gap-4"></div>
    </div>

    <div id="detail-view" class="max-w-md mx-auto p-4 hidden relative min-h-screen">
        
        <div class="sticky top-4 z-50 mb-6 flex justify-between items-center">
            <button onclick="showLanding()" class="btn-silver text-accent-blue px-4 py-2 rounded-full font-bold text-sm flex items-center gap-2 hover:bg-white transition-all transform hover:scale-105">
                <span>‚óÄ Back to Main</span>
            </button>
            <div id="detail-title" class="font-bold text-lg text-gray-500 bg-white/50 px-3 py-1 rounded-lg backdrop-blur-sm">
                </div>
        </div>

        <div id="timeline-content" class="space-y-6 relative timeline-line pl-2">
            </div>
    </div>

    <script>
        // üëá ‡πÉ‡∏™‡πà‡∏•‡∏¥‡∏á‡∏Å‡πå CSV ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÉ‡∏´‡πâ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡∏£‡∏±‡∏ö üëá
        const SHEET_CSV_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vSsNmpYBJTnOp4Wa3lQy3VeTolxfSHKzRaXXGnM2k_C8iq0hYC4MlLLqSIb12Ml8fDDw6AhPp6ePFds/pub?gid=289892197&single=true&output=csv"; 

        let allData = []; // ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÑ‡∏ß‡πâ

        document.addEventListener('DOMContentLoaded', () => {
            fetchData();
        });

        function fetchData() {
            Papa.parse(SHEET_CSV_URL, {
                download: true,
                header: true,
                skipEmptyLines: true,
                complete: function(results) {
                    allData = results.data;
                    renderDaysGrid(allData);
                },
                error: function(err) {
                    document.getElementById('loading').innerHTML = "‚ùå Error Loading Data";
                }
            });
        }

        // ------------------------------------------------
        // VIEW 1: RENDER DAY CARDS (‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô)
        // ------------------------------------------------
        function renderDaysGrid(data) {
            const grid = document.getElementById('days-grid');
            const loading = document.getElementById('loading');
            loading.classList.add('hidden');

            // Group ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏≤‡∏° 'Day'
            const daysMap = new Map();
            
            data.forEach(row => {
                if(!row.Day) return;
                // ‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ Day ‡∏ô‡∏µ‡πâ‡πÉ‡∏ô Map ‡πÉ‡∏´‡πâ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ
                if(!daysMap.has(row.Day)) {
                    daysMap.set(row.Day, {
                        date: row.Date || '', // ‡πÄ‡∏Å‡πá‡∏ö‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà (Date) ‡πÑ‡∏ß‡πâ‡πÇ‡∏ä‡∏ß‡πå
                        dayTitle: row.Day     // ‡πÄ‡∏Å‡πá‡∏ö‡∏ä‡∏∑‡πà‡∏≠‡∏ß‡∏±‡∏ô (Day)
                    });
                }
            });

            // ‡∏™‡∏£‡πâ‡∏≤‡∏á Card
            daysMap.forEach((val, key) => {
                const card = document.createElement('div');
                card.className = "bg-white p-6 rounded-2xl shadow-sm border border-gray-100 hover:shadow-md hover:border-blue-200 cursor-pointer transition-all transform hover:-translate-y-1 text-center";
                card.onclick = () => showTimeline(key); // ‡∏Å‡∏î‡πÅ‡∏•‡πâ‡∏ß‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤ Timeline

                card.innerHTML = `
                    <p class="text-text-secondary text-lg font-medium mb-1">${val.date}</p> <h2 class="text-4xl font-bold text-accent-blue">${val.dayTitle}</h2> `;
                grid.appendChild(card);
            });
        }

        // ------------------------------------------------
        // VIEW 2: RENDER TIMELINE (‡∏´‡∏ô‡πâ‡∏≤‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î)
        // ------------------------------------------------
        function showTimeline(selectedDay) {
            // ‡∏™‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠
            document.getElementById('landing-view').classList.add('hidden');
            document.getElementById('detail-view').classList.remove('hidden');
            window.scrollTo(0, 0);

            const container = document.getElementById('timeline-content');
            container.innerHTML = ''; // ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏Ç‡∏≠‡∏á‡πÄ‡∏Å‡πà‡∏≤

            // ‡∏Å‡∏£‡∏≠‡∏á‡πÄ‡∏≠‡∏≤‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å
            const dayData = allData.filter(row => row.Day === selectedDay);
            
            // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó Title ‡∏Ç‡πâ‡∏≤‡∏á‡∏ö‡∏ô‡∏õ‡∏∏‡πà‡∏° Back
            if(dayData.length > 0) {
                document.getElementById('detail-title').innerText = `${selectedDay} (${dayData[0].Date || ''})`;
            }

            dayData.forEach(row => {
                // ‡∏Ç‡πâ‡∏≤‡∏°‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ Activity
                if (!row.Activity && !row.Time) return;

                const item = document.createElement('div');
                item.className = "relative flex items-start gap-4 z-10";

                // ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Category Color
                const catStyle = getCategoryStyle(row.Category);
                const categoryIcon = getCategoryIcon(row.Category);

                item.innerHTML = `
                    <div class="flex-shrink-0 w-12 h-12 rounded-full flex items-center justify-center border-2 shadow-sm text-xl bg-white z-10 ${catStyle.border} ${catStyle.bg}">
                        ${categoryIcon}
                    </div>

                    <div class="flex-1 bg-white p-5 rounded-2xl border border-gray-100 shadow-sm mb-4">
                        
                        <div class="text-3xl font-bold text-accent-blue mb-3 font-sans tracking-tight">
                            ${row.Time || ''}
                        </div>

                        <div class="mb-2">
                             ${row.Location ? `
                                <a href="https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(row.Location)}" target="_blank" class="text-xl font-bold text-gray-800 hover:text-blue-600 underline decoration-dotted underline-offset-4 transition-colors">
                                    üìç ${row.Location}
                                </a>
                             ` : ''}
                        </div>

                        <div class="text-gray-500 text-base font-medium leading-relaxed mb-3">
                            ${row.Activity || '-'}
                        </div>

                        ${(row.Departure || row.Arrival) ? `
                            <div class="flex gap-3 mt-3 pt-3 border-t border-gray-100 text-sm text-gray-600">
                                ${row.Departure ? `<div>üõ´ Dep: <span class="font-bold">${row.Departure}</span></div>` : ''}
                                ${row.Arrival ? `<div>üõ¨ Arr: <span class="font-bold">${row.Arrival}</span></div>` : ''}
                            </div>
                        ` : ''}

                        ${row['Map Code'] ? `
                            <div class="mt-2 text-xs text-gray-400 font-mono bg-gray-50 inline-block px-2 py-1 rounded">
                                üó∫ Code: ${row['Map Code']}
                            </div>
                        ` : ''}
                        
                        ${row.Category ? `
                            <div class="mt-3 flex justify-end">
                                <span class="text-xs font-bold px-3 py-1 rounded-full uppercase border ${catStyle.bg} ${catStyle.border} ${catStyle.text}">
                                    ${row.Category.toUpperCase()}
                                </span>
                            </div>
                        ` : ''}

                    </div>
                `;
                container.appendChild(item);
            });
        }

        function showLanding() {
            document.getElementById('detail-view').classList.add('hidden');
            document.getElementById('landing-view').classList.remove('hidden');
        }

        // ============================================
        // Helper: ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏µ‡πÅ‡∏•‡∏∞‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡∏ï‡∏≤‡∏° Category
        // ============================================
        function getCategoryStyle(cat) {
            if (!cat) return { bg: 'bg-gray-50', border: 'border-gray-200', text: 'text-gray-500' };
            
            const c = cat.toUpperCase().trim();
            
            // Food: ‡∏°‡πà‡∏ß‡∏á‡∏≠‡πà‡∏≠‡∏ô / ‡∏Ç‡∏≠‡∏ö‡∏°‡πà‡∏ß‡∏á‡πÄ‡∏Ç‡πâ‡∏°
            if (c === 'FOOD') return { bg: 'bg-purple-100', border: 'border-purple-800', text: 'text-purple-900' };
            
            // Travel: ‡∏ä‡∏°‡∏û‡∏π‡∏≠‡πà‡∏≠‡∏ô / ‡∏Ç‡∏≠‡∏ö‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á‡πÄ‡∏Ç‡πâ‡∏° (Yellow-600)
            if (c === 'TRAVEL') return { bg: 'bg-pink-100', border: 'border-yellow-600', text: 'text-pink-900' };
            
            // Shopping: ‡πÅ‡∏î‡∏á‡∏≠‡πà‡∏≠‡∏ô / ‡∏Ç‡∏≠‡∏ö‡∏Ç‡∏≤‡∏ß (‡∏õ‡∏£‡∏±‡∏ö‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡∏≠‡∏ö‡∏à‡∏≤‡∏á‡πÜ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏´‡πá‡∏ô‡∏ä‡∏±‡∏î)
            if (c === 'SHOPPING') return { bg: 'bg-red-50', border: 'border-red-200', text: 'text-red-800' };
            
            // Snow: ‡∏ü‡πâ‡∏≤‡∏≠‡πà‡∏≠‡∏ô / ‡∏Ç‡∏≠‡∏ö‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏Ç‡πâ‡∏°
            if (c === 'SNOW') return { bg: 'bg-sky-100', border: 'border-blue-900', text: 'text-blue-900' };
            
            // Hotel: ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á‡∏≠‡πà‡∏≠‡∏ô / ‡∏Ç‡∏≠‡∏ö‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á‡πÄ‡∏Ç‡πâ‡∏°
            if (c === 'HOTEL') return { bg: 'bg-yellow-50', border: 'border-yellow-600', text: 'text-yellow-800' };
            
            // Coffee/Matcha: ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏≠‡πà‡∏≠‡∏ô / ‡∏Ç‡∏≠‡∏ö‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏•‡πÄ‡∏Ç‡πâ‡∏°
            if (c.includes('COFFEE') || c.includes('MATCHA')) return { bg: 'bg-green-100', border: 'border-amber-900', text: 'text-green-900' };

            // Default
            return { bg: 'bg-gray-100', border: 'border-gray-300', text: 'text-gray-600' };
        }

        function getCategoryIcon(cat) {
            if (!cat) return '‚ú®';
            const c = cat.toUpperCase();
            if (c === 'FOOD') return 'üçú';
            if (c === 'TRAVEL') return 'üöÑ';
            if (c === 'SHOPPING') return 'üõçÔ∏è';
            if (c === 'SNOW') return '‚ùÑÔ∏è';
            if (c === 'HOTEL') return 'üè®';
            if (c.includes('COFFEE') || c.includes('MATCHA')) return 'üçµ';
            return 'üìå';
        }

    </script>
</body>
</html>
